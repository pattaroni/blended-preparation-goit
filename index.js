import"./assets/styles-Bis9cBxL.js";import{a as m,i as l}from"./assets/vendor-BO1i2NM4.js";const B="https://dummyjson.com",g={CATEGORIES:"/products/category-list",PRODUCTS:"/products",SEARCH:"/products/search",PRODUCTS_BY_CATEGORY:"/products/category"},u=12,c={COMMON:"common",PRODUCTS_BY_CATEGORY:"productsByCategory",SEARCH:"search"},L="theme";m.defaults.baseURL=B;const S=async()=>{const{data:t}=await m.get(g.CATEGORIES);return t},h=async t=>{const{data:s}=await m.get(`${g.PRODUCTS}`,{params:{limit:u,skip:(t-1)*u}});return s},y=async(t,s)=>{const{data:o}=await m.get(`${g.SEARCH}`,{params:{limit:u,q:t,skip:(s-1)*u}});return o},M=async t=>{const{data:s}=await m.get(`${g.PRODUCTS}/${t}`);return s},f=async(t,s)=>{const{data:o}=await m.get(`${g.PRODUCTS_BY_CATEGORY}/${t}`,{params:{limit:u,skip:(s-1)*u}});return o},e={ulCategorEl:document.querySelector(".categories"),ulProductEl:document.querySelector(".products"),searchFormEl:document.querySelector(".search-form"),clearBtnForm:document.querySelector(".search-form__btn-clear"),notFoundEl:document.querySelector(".not-found"),modalEl:document.querySelector(".modal"),modalCloseBtn:document.querySelector(".modal__close-btn"),modalListEl:document.querySelector(".modal-product"),loadMoreBtn:document.querySelector(".load-more-btn"),loaderEl:document.querySelector(".loader"),scrollToTopBtn:document.querySelector(".scroll-top-btn"),toggleThemeEl:document.querySelector(".theme-toggle-btn")},P=t=>{const s=t.map(o=>`<li class="categories__item">
   <button class="categories__btn" type="button">${o}</button>
 </li>`).join("");e.ulCategorEl.innerHTML=s},b=t=>{const s=t.map(o=>`<li class="products__item" data-id="${o.id}">
    <img class="products__image" src="${o.thumbnail}" alt="${o.description}"/>
    <p class="products__title">${o.title}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${o.brand}</span></p>
    <p class="products__category">Category: ${o.category}</p>
    <p class="products__price">Price: ${o.price}$</p>
 </li>`).join("");e.ulProductEl.insertAdjacentHTML("beforeend",s)},$=t=>{e.ulProductEl.innerHTML="";const s=t.map(o=>`<li class="products__item" data-id="${o.id}">
    <img class="products__image" src="${o.thumbnail}" alt="${o.description}"/>
    <p class="products__title">${o.title}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${o.brand}</span></p>
    <p class="products__category">Category: ${o.category}</p>
    <p class="products__price">Price: ${o.price}$</p>
 </li>`).join("");e.ulProductEl.innerHTML=s},O=t=>{const s=`<img class="modal-product__img" src="${t.thumbnail}" alt="${t.description}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${t.title}</p>
        <ul class="modal-product__tags">${t.tags}</ul>
        <p class="modal-product__description">${t.description}</p>
        <p class="modal-product__shipping-information">Shipping: ${t.shippingInformation}</p>
        <p class="modal-product__return-policy">Return Policy: ${t.returnPolicy}</p>
        <p class="modal-product__price">Price: ${t.price}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>
`;e.modalListEl.innerHTML=s},R=t=>t?!0:(l.warning({message:"Введіть значення для пошуку"}),!1),w=t=>!t.products||t.products.length===0?(l.warning({message:"Нічого не знайдено"}),!1):!0,_=()=>{e.ulCategorEl.querySelectorAll(".categories__btn").forEach(t=>{t.classList.remove("categories__btn--active")})},A=()=>{e.clearBtnForm.addEventListener("click",()=>{e.ulProductEl.innerHTML="",e.searchFormEl.searchValue.value="",e.clearBtnForm.classList.remove("search-form__btn-clear--visible"),e.notFoundEl.classList.remove("not-found--visible"),e.loadMoreBtn.classList.add("is-hidden"),e.loaderEl.classList.add("is-visible"),_();const t=e.ulCategorEl.querySelector("button");t&&t.classList.add("categories__btn--active"),F(),v()})},k=()=>{window.addEventListener("scroll",()=>{window.scrollY>400?e.scrollToTopBtn.classList.add("scroll-top-btn--visible"):e.scrollToTopBtn.classList.remove("scroll-top-btn--visible")}),e.scrollToTopBtn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})};let r=1,i,d=0,a="",p=!1,n=c.COMMON;const F=()=>{r=1},H=async()=>{try{const t=await S();P(["All",...t]);const s=e.ulCategorEl.querySelector("button");s&&(s.classList.add("categories__btn--active"),a="All")}catch(t){l.error({message:t})}},v=async()=>{if(!a){a="All",n=c.COMMON,_();const t=e.ulCategorEl.querySelector("button");t&&t.classList.add("categories__btn--active")}try{const t=await h(r);b(t.products),d=Math.ceil(t.total/t.limit),r<d?e.loadMoreBtn.classList.remove("is-hidden"):e.loadMoreBtn.classList.add("is-hidden")}catch(t){l.error({message:t})}},q=()=>{e.loadMoreBtn.addEventListener("click",async()=>{e.loadMoreBtn.classList.add("is-hidden"),e.loaderEl.classList.add("is-visible"),r++;let t;a&&(p=!0);try{n===c.COMMON?t=await h(r):n===c.PRODUCTS_BY_CATEGORY?t=await f(a,r):n===c.SEARCH&&(t=await y(i,r)),b(t.products),e.loadMoreBtn.classList.remove("is-hidden");const s=document.querySelector(".products__item");if(s){const o=s.getBoundingClientRect().height;window.scrollBy({top:o*2,behavior:"smooth"})}r>=d&&(e.loadMoreBtn.classList.add("is-hidden"),l.info({message:"We're sorry, but you've reached the end of search results.",position:"bottomCenter"}))}catch(s){l.error({message:s.message||"Failed to load products"})}finally{p=!1,e.loaderEl.classList.remove("is-visible")}})},D=()=>{e.searchFormEl.addEventListener("submit",async t=>{if(t.preventDefault(),i=t.target.searchValue.value.trim(),localStorage.setItem("userValue",i),!!R(i)){i&&(e.clearBtnForm.classList.add("search-form__btn-clear--visible"),n=c.SEARCH,a="",_()),r=1;try{r=1;const s=await y(i,r);if(!w(s)){e.loadMoreBtn.classList.add("is-hidden"),e.notFoundEl.classList.add("not-found--visible"),e.ulProductEl.innerHTML="";return}e.notFoundEl.classList.remove("not-found--visible"),$(s.products),d=Math.ceil(s.total/s.limit),r<d?e.loadMoreBtn.classList.remove("is-hidden"):e.loadMoreBtn.classList.add("is-hidden")}catch(s){l.error({message:s})}}})},U=()=>{e.ulProductEl.addEventListener("click",async t=>{const s=t.target.closest("li");if(!s)return;const o=s.dataset.id;if(o){e.modalEl.classList.add("modal--is-open");try{const E=await M(o);O(E)}catch(E){l.error({message:E.message||"Failed to load product"})}}}),e.modalCloseBtn.addEventListener("click",()=>{e.modalEl.classList.remove("modal--is-open"),e.modalListEl.innerHTML=""}),e.modalEl.addEventListener("click",t=>{t.target===e.modalEl&&(e.modalEl.classList.remove("modal--is-open"),e.modalListEl.innerHTML="")})},Y=()=>{e.ulCategorEl.addEventListener("click",async t=>{if(t.target.nodeName!=="BUTTON"||p)return;a=t.target.textContent,e.ulProductEl.innerHTML="",e.notFoundEl.classList.remove("not-found--visible"),e.loadMoreBtn.classList.add("is-hidden"),e.loaderEl.classList.add("is-visible"),e.clearBtnForm.classList.remove("search-form__btn-clear--visible"),i="",e.searchFormEl.reset(),_(),t.target.classList.add("categories__btn--active"),r=1;let s;p=!0;try{a==="All"?(n=c.COMMON,s=await h(r)):(n=c.PRODUCTS_BY_CATEGORY,s=await f(a,r)),b(s.products),d=Math.ceil(s.total/s.limit),r<d?e.loadMoreBtn.classList.remove("is-hidden"):e.loadMoreBtn.classList.add("is-hidden"),s.products.length||e.notFoundEl.classList.add("not-found--visible")}catch(o){l.error({message:o.message||"Failed to load category products"})}finally{p=!1,e.loaderEl.classList.remove("is-visible")}})},C=()=>localStorage.getItem(L)||"light",T=t=>{document.documentElement.setAttribute("data-theme",t)},N=()=>{const s=C()==="light"?"dark":"light";localStorage.setItem(L,s),T(s)},V=()=>{T(C());const t=document.querySelector(".theme-toggle-btn");t&&t.addEventListener("click",N)};function I(t,s){const o=localStorage.getItem("userValue");o&&(t.searchFormEl.searchValue.value=o,s(o,1))}k();H();v();D();A();U();Y();q();V();I(e,y);
//# sourceMappingURL=index.js.map
