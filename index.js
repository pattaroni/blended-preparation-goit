import"./assets/styles-Bis9cBxL.js";import{a as g,i as c}from"./assets/vendor-BO1i2NM4.js";const B="https://dummyjson.com",_={CATEGORIES:"/products/category-list",PRODUCTS:"/products",SEARCH:"/products/search",PRODUCTS_BY_CATEGORY:"/products/category"},m=12,l={COMMON:"common",PRODUCTS_BY_CATEGORY:"productsByCategory",SEARCH:"search"},L="theme";g.defaults.baseURL=B;const M=async()=>{const{data:e}=await g.get(_.CATEGORIES);return e},E=async e=>{const{data:s}=await g.get(`${_.PRODUCTS}`,{params:{limit:m,skip:(e-1)*m}});return s},h=async(e,s=1)=>{const{data:o}=await g.get(`${_.SEARCH}`,{params:{limit:m,q:e,skip:(s-1)*m}});return o},P=async e=>{const{data:s}=await g.get(`${_.PRODUCTS}/${e}`);return s},b=async(e,s)=>{const{data:o}=await g.get(`${_.PRODUCTS_BY_CATEGORY}/${e}`,{params:{limit:m,skip:(s-1)*m}});return o},t={ulCategorEl:document.querySelector(".categories"),ulProductEl:document.querySelector(".products"),searchFormEl:document.querySelector(".search-form"),clearBtnForm:document.querySelector(".search-form__btn-clear"),notFoundEl:document.querySelector(".not-found"),modalEl:document.querySelector(".modal"),modalCloseBtn:document.querySelector(".modal__close-btn"),modalListEl:document.querySelector(".modal-product"),loadMoreBtn:document.querySelector(".load-more-btn"),loaderEl:document.querySelector(".loader"),scrollToTopBtn:document.querySelector(".scroll-top-btn"),toggleThemeEl:document.querySelector(".theme-toggle-btn"),homeLogoEl:document.querySelector(".logo")},w=e=>{const s=e.map(o=>`<li class="categories__item">
   <button class="categories__btn" type="button">${o}</button>
 </li>`).join("");t.ulCategorEl.innerHTML=s},y=e=>{const s=e.map(o=>`<li class="products__item" data-id="${o.id}">
    <img class="products__image" src="${o.thumbnail}" alt="${o.description}"/>
    <p class="products__title">${o.title}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${o.brand}</span></p>
    <p class="products__category">Category: ${o.category}</p>
    <p class="products__price">Price: ${o.price}$</p>
 </li>`).join("");t.ulProductEl.insertAdjacentHTML("beforeend",s)},f=e=>{t.ulProductEl.innerHTML="";const s=e.map(o=>`<li class="products__item" data-id="${o.id}">
    <img class="products__image" src="${o.thumbnail}" alt="${o.description}"/>
    <p class="products__title">${o.title}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${o.brand}</span></p>
    <p class="products__category">Category: ${o.category}</p>
    <p class="products__price">Price: ${o.price}$</p>
 </li>`).join("");t.ulProductEl.innerHTML=s},O=e=>{const s=`<img class="modal-product__img" src="${e.thumbnail}" alt="${e.description}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${e.title}</p>
        <ul class="modal-product__tags">${e.tags}</ul>
        <p class="modal-product__description">${e.description}</p>
        <p class="modal-product__shipping-information">Shipping: ${e.shippingInformation}</p>
        <p class="modal-product__return-policy">Return Policy: ${e.returnPolicy}</p>
        <p class="modal-product__price">Price: ${e.price}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>
`;t.modalListEl.innerHTML=s},$=e=>e?!0:(c.warning({message:"Введіть значення для пошуку"}),!1),A=e=>!e.products||e.products.length===0?(c.warning({message:"Нічого не знайдено"}),!1):!0,v=()=>{t.ulCategorEl.querySelectorAll(".categories__btn").forEach(e=>{e.classList.remove("categories__btn--active")})},R=()=>{t.clearBtnForm.addEventListener("click",()=>{t.ulProductEl.innerHTML="",t.searchFormEl.searchValue.value="",t.clearBtnForm.classList.remove("search-form__btn-clear--visible"),t.notFoundEl.classList.remove("not-found--visible"),t.loadMoreBtn.classList.add("is-hidden"),t.loaderEl.classList.add("is-visible"),v();const e=t.ulCategorEl.querySelector("button");e&&e.classList.add("categories__btn--active"),localStorage.removeItem("userValue"),q(),C()})},F=()=>{window.addEventListener("scroll",()=>{window.scrollY>400?t.scrollToTopBtn.classList.add("scroll-top-btn--visible"):t.scrollToTopBtn.classList.remove("scroll-top-btn--visible")}),t.scrollToTopBtn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})};function H(e,s){const o=localStorage.getItem("userValue");o&&(e.searchFormEl.searchValue.value=o,s(o,1))}t.homeLogoEl.addEventListener("click",e=>{localStorage.removeItem("userValue"),localStorage.removeItem("selectedCategory"),window.location.href="/"});async function k(){const e=localStorage.getItem("userValue");if(!e)return;t.searchFormEl.searchValue.value=e;const s=await h(e);Array.isArray(s.products)&&f(s.products)}let r=1,d,u=0,a="",p=!1,i=l.COMMON;const q=()=>{r=1},I=async()=>{try{const e=await M();w(["All",...e]);const s=t.ulCategorEl.querySelector("button");s&&(s.classList.add("categories__btn--active"),a="All")}catch(e){c.error({message:e})}},C=async()=>{if(!a){a="All",i=l.COMMON,v();const e=t.ulCategorEl.querySelector("button");e&&e.classList.add("categories__btn--active")}try{const e=await E(r);y(e.products),u=Math.ceil(e.total/e.limit),r<u?t.loadMoreBtn.classList.remove("is-hidden"):t.loadMoreBtn.classList.add("is-hidden")}catch(e){c.error({message:e})}},V=()=>{t.loadMoreBtn.addEventListener("click",async()=>{t.loadMoreBtn.classList.add("is-hidden"),t.loaderEl.classList.add("is-visible"),r++;let e;a&&(p=!0);try{i===l.COMMON?e=await E(r):i===l.PRODUCTS_BY_CATEGORY?e=await b(a,r):i===l.SEARCH&&(e=await h(d,r)),y(e.products),t.loadMoreBtn.classList.remove("is-hidden");const s=document.querySelector(".products__item");if(s){const o=s.getBoundingClientRect().height;window.scrollBy({top:o*2,behavior:"smooth"})}r>=u&&(t.loadMoreBtn.classList.add("is-hidden"),c.info({message:"We're sorry, but you've reached the end of search results.",position:"bottomCenter"}))}catch(s){c.error({message:s.message||"Failed to load products"})}finally{p=!1,t.loaderEl.classList.remove("is-visible")}})},Y=()=>{t.searchFormEl.addEventListener("submit",async e=>{if(e.preventDefault(),d=e.target.searchValue.value.trim(),localStorage.setItem("userValue",d),localStorage.removeItem("selectedCategory"),!!$(d)){d&&(t.clearBtnForm.classList.add("search-form__btn-clear--visible"),i=l.SEARCH,a="",v()),r=1;try{r=1;const s=await h(d,r);if(!A(s)){t.loadMoreBtn.classList.add("is-hidden"),t.notFoundEl.classList.add("not-found--visible"),t.ulProductEl.innerHTML="";return}t.notFoundEl.classList.remove("not-found--visible"),f(s.products),u=Math.ceil(s.total/s.limit),r<u?t.loadMoreBtn.classList.remove("is-hidden"):t.loadMoreBtn.classList.add("is-hidden")}catch(s){c.error({message:s})}}})},D=()=>{t.ulProductEl.addEventListener("click",async e=>{const s=e.target.closest("li");if(!s)return;const o=s.dataset.id;if(o){t.modalEl.classList.add("modal--is-open");try{const n=await P(o);O(n)}catch(n){c.error({message:n.message||"Failed to load product"})}}}),t.modalCloseBtn.addEventListener("click",()=>{t.modalEl.classList.remove("modal--is-open"),t.modalListEl.innerHTML=""}),t.modalEl.addEventListener("click",e=>{e.target===t.modalEl&&(t.modalEl.classList.remove("modal--is-open"),t.modalListEl.innerHTML="")})},U=()=>{t.ulCategorEl.addEventListener("click",async e=>{if(e.target.nodeName!=="BUTTON"||p)return;a=e.target.textContent,localStorage.removeItem("userValue"),localStorage.setItem("selectedCategory",a),t.ulProductEl.innerHTML="",t.notFoundEl.classList.remove("not-found--visible"),t.loadMoreBtn.classList.add("is-hidden"),t.loaderEl.classList.add("is-visible"),t.clearBtnForm.classList.remove("search-form__btn-clear--visible"),d="",t.searchFormEl.reset(),v(),e.target.classList.add("categories__btn--active"),r=1;let s;p=!0;try{a==="All"?(i=l.COMMON,s=await E(r)):(i=l.PRODUCTS_BY_CATEGORY,s=await b(a,r)),y(s.products),u=Math.ceil(s.total/s.limit),r<u?t.loadMoreBtn.classList.remove("is-hidden"):t.loadMoreBtn.classList.add("is-hidden"),s.products.length||t.notFoundEl.classList.add("not-found--visible")}catch(o){c.error({message:o.message||"Failed to load category products"})}finally{p=!1,t.loaderEl.classList.remove("is-visible")}})},S=()=>localStorage.getItem(L)||"light",T=e=>{document.documentElement.setAttribute("data-theme",e)},N=()=>{const s=S()==="light"?"dark":"light";localStorage.setItem(L,s),T(s)},G=()=>{T(S());const e=document.querySelector(".theme-toggle-btn");e&&e.addEventListener("click",N)};async function j(){const e=localStorage.getItem("selectedCategory");if(!e)return;a=e,i=e==="All"?l.COMMON:l.PRODUCTS_BY_CATEGORY,t.searchFormEl.searchValue.value="",t.clearBtnForm.classList.remove("search-form__btn-clear--visible"),t.notFoundEl.classList.remove("not-found--visible"),t.ulProductEl.innerHTML="",t.loaderEl.classList.add("is-visible"),t.ulCategorEl.querySelectorAll(".categories__btn").forEach(n=>{n.classList.remove("categories__btn--active"),n.textContent===e&&n.classList.add("categories__btn--active")});let o;e==="All"?o=await E(1):o=await b(e,1),y(o.products),t.loaderEl.classList.remove("is-visible")}async function x(){F(),await I(),await j(),await C(),Y(),R(),D(),U(),V(),G(),H(t,h),k()}x();
//# sourceMappingURL=index.js.map
