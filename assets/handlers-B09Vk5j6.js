import{a as f,i}from"./vendor-BO1i2NM4.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const b of c.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&d(b)}).observe(document,{childList:!0,subtree:!0});function o(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function d(a){if(a.ep)return;a.ep=!0;const c=o(a);fetch(a.href,c)}})();const O="https://dummyjson.com",S={CATEGORIES:"/products/category-list",PRODUCTS:"/products",SEARCH:"/products/search",PRODUCTS_BY_CATEGORY:"/products/category"},_=12,u={COMMON:"common",PRODUCTS_BY_CATEGORY:"productsByCategory",SEARCH:"search"},r={CART:"cart",WISHLIST:"wishlist",THEME:"theme",USER_VALUE:"userValue",SELECTED_CATEGORY:"selectedCategory"},P={CART:"cart",WISHLIST:"wishlist"};f.defaults.baseURL=O;const $=async()=>{const{data:t}=await f.get(S.CATEGORIES);return t},y=async t=>{const{data:s}=await f.get(`${S.PRODUCTS}`,{params:{limit:_,skip:(t-1)*_}});return s},B=async(t,s=1)=>{const{data:o}=await f.get(`${S.SEARCH}`,{params:{limit:_,q:t,skip:(s-1)*_}});return o},H=async t=>{const{data:s}=await f.get(`${S.PRODUCTS}/${t}`);return s},A=async(t,s)=>{const{data:o}=await f.get(`${S.PRODUCTS_BY_CATEGORY}/${t}`,{params:{limit:_,skip:(s-1)*_}});return o},k=async t=>(await Promise.all(t.map(o=>f.get(`${S.PRODUCTS}/${o}`)))).map(o=>o.data),e={ulCategorEl:document.querySelector(".categories"),ulProductEl:document.querySelector(".products"),searchFormEl:document.querySelector(".search-form"),clearBtnForm:document.querySelector(".search-form__btn-clear"),notFoundEl:document.querySelector(".not-found"),modalEl:document.querySelector(".modal"),modalCloseBtn:document.querySelector(".modal__close-btn"),modalListEl:document.querySelector(".modal-product"),loadMoreBtn:document.querySelector(".load-more-btn"),loaderEl:document.querySelector(".loader"),scrollToTopBtn:document.querySelector(".scroll-top-btn"),toggleThemeEl:document.querySelector(".theme-toggle-btn"),buyProductsBtn:document.querySelector(".cart-summary__btn"),cartCountEl:document.querySelector("[data-cart-count]"),productsCountEl:document.querySelector("[data-count]"),wishlistCountEl:document.querySelector("[data-wishlist-count]"),priceCountEl:document.querySelector("[data-price]"),homeLogoEl:document.querySelector(".logo"),wishlistBtnEl:document.querySelector("[data-wishlist]"),cartBtnEl:document.querySelector("[data-cart]")},q=t=>{const s=t.map(o=>`<li class="categories__item">
   <button class="categories__btn" type="button">${o}</button>
 </li>`).join("");e.ulCategorEl.innerHTML=s},v=t=>{const s=t.map(o=>`<li class="products__item" data-id="${o.id}">
    <img class="products__image" src="${o.thumbnail}" alt="${o.description}"/>
    <p class="products__title">${o.title}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${o.brand}</span></p>
    <p class="products__category">Category: ${o.category}</p>
    <p class="products__price">Price: ${o.price}$</p>
 </li>`).join("");e.ulProductEl.insertAdjacentHTML("beforeend",s)},w=t=>{e.ulProductEl.innerHTML="";const s=t.map(o=>`<li class="products__item" data-id="${o.id}">
    <img class="products__image" src="${o.thumbnail}" alt="${o.description}"/>
    <p class="products__title">${o.title}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${o.brand}</span></p>
    <p class="products__category">Category: ${o.category}</p>
    <p class="products__price">Price: ${o.price}$</p>
 </li>`).join("");e.ulProductEl.innerHTML=s},F=t=>{const s=`<img class="modal-product__img" src="${t.thumbnail}" alt="${t.description}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${t.title}</p>
        <ul class="modal-product__tags">${t.tags}</ul>
        <p class="modal-product__description">${t.description}</p>
        <p class="modal-product__shipping-information">Shipping: ${t.shippingInformation}</p>
        <p class="modal-product__return-policy">Return Policy: ${t.returnPolicy}</p>
        <p class="modal-product__price">Price: ${t.price}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>
`;e.modalListEl.innerHTML=s},U=t=>{try{return JSON.parse(localStorage.getItem(t))}catch(s){return i.error({message:`Error retrieving data from storage: ${s.message}`}),null}},E=t=>[r.CART,r.WISHLIST].includes(t)?U(t):localStorage.getItem(t),L=(t,s)=>{[r.CART,r.WISHLIST].includes(t)?localStorage.setItem(t,JSON.stringify(s)):localStorage.setItem(t,s)},D=(t,s)=>{const d=(E(t)||[]).filter(a=>a!==Number(s));localStorage.setItem(t,JSON.stringify(d))},R=(t,s)=>{[r.CART,r.WISHLIST].includes(t)?D(t,s):localStorage.removeItem(t)},N=t=>t?!0:(i.warning({message:"Введіть значення для пошуку"}),!1),Y=t=>!t.products||t.products.length===0?(i.warning({message:"Нічого не знайдено"}),!1):!0,T=()=>{e.ulCategorEl.querySelectorAll(".categories__btn").forEach(t=>{t.classList.remove("categories__btn--active")})},j=()=>{e.clearBtnForm.addEventListener("click",()=>{e.ulProductEl.innerHTML="",e.searchFormEl.searchValue.value="",e.clearBtnForm.classList.remove("search-form__btn-clear--visible"),e.notFoundEl.classList.remove("not-found--visible"),e.loadMoreBtn.classList.add("is-hidden"),e.loaderEl.classList.add("is-visible"),T();const t=e.ulCategorEl.querySelector("button");t&&t.classList.add("categories__btn--active"),localStorage.removeItem(r.USER_VALUE),x(),G()})},J=()=>{window.addEventListener("scroll",()=>{window.scrollY>400?e.scrollToTopBtn.classList.add("scroll-top-btn--visible"):e.scrollToTopBtn.classList.remove("scroll-top-btn--visible")}),e.scrollToTopBtn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})};e.homeLogoEl.addEventListener("click",t=>{localStorage.removeItem(r.USER_VALUE),localStorage.removeItem(r.SELECTED_CATEGORY),window.location.href="/"});async function z(){const t=E(r.USER_VALUE);if(!t)return;e.searchFormEl.searchValue.value=t;const s=await B(t);Array.isArray(s.products)&&w(s.products)}let l=1,g,h=0,n="",C=!1,p=u.COMMON,m;const x=()=>{l=1},K=async()=>{try{const t=await $();q(["All",...t]);const s=e.ulCategorEl.querySelector("button");s&&(s.classList.add("categories__btn--active"),n="All")}catch(t){i.error({message:t})}},G=async()=>{if(!n){n="All",p=u.COMMON,T();const t=e.ulCategorEl.querySelector("button");t&&t.classList.add("categories__btn--active")}try{const t=await y(l);v(t.products),h=Math.ceil(t.total/t.limit),l<h?e.loadMoreBtn.classList.remove("is-hidden"):e.loadMoreBtn.classList.add("is-hidden")}catch(t){i.error({message:t})}},Q=()=>{e.loadMoreBtn.addEventListener("click",async()=>{e.loadMoreBtn.classList.add("is-hidden"),e.loaderEl.classList.add("is-visible"),l++;let t;n&&(C=!0);try{p===u.COMMON?t=await y(l):p===u.PRODUCTS_BY_CATEGORY?t=await A(n,l):p===u.SEARCH&&(t=await B(g,l)),v(t.products),e.loadMoreBtn.classList.remove("is-hidden");const s=document.querySelector(".products__item");if(s){const o=s.getBoundingClientRect().height;window.scrollBy({top:o*2,behavior:"smooth"})}l>=h&&(e.loadMoreBtn.classList.add("is-hidden"),i.info({message:"We're sorry, but you've reached the end of search results.",position:"bottomCenter"}))}catch(s){i.error({message:s.message||"Failed to load products"})}finally{C=!1,e.loaderEl.classList.remove("is-visible")}})},X=()=>{e.searchFormEl.addEventListener("submit",async t=>{if(t.preventDefault(),g=t.target.searchValue.value.trim(),L(r.USER_VALUE,g),localStorage.removeItem(r.SELECTED_CATEGORY),!!N(g)){g&&(e.clearBtnForm.classList.add("search-form__btn-clear--visible"),p=u.SEARCH,n="",T()),l=1;try{l=1;const s=await B(g,l);if(!Y(s)){e.loadMoreBtn.classList.add("is-hidden"),e.notFoundEl.classList.add("not-found--visible"),e.ulProductEl.innerHTML="";return}e.notFoundEl.classList.remove("not-found--visible"),w(s.products),h=Math.ceil(s.total/s.limit),l<h?e.loadMoreBtn.classList.remove("is-hidden"):e.loadMoreBtn.classList.add("is-hidden")}catch(s){i.error({message:s})}}})},Z=()=>{e.ulProductEl.addEventListener("click",async t=>{const s=t.target.closest("li");if(!s)return;const o=Number(s.dataset.id);if(!o)return;e.modalEl.classList.add("modal--is-open"),m=o;const d=E(r.WISHLIST)||[],a=E(r.CART)||[];d.includes(o)?e.wishlistBtnEl.textContent="Remove from Wishlist":e.wishlistBtnEl.textContent="Add to Wishlist",a.includes(o)?e.cartBtnEl.textContent="Remove from Cart":e.cartBtnEl.textContent="Add to Cart";try{const c=await H(o);F(c)}catch(c){i.error({message:c.message||"Failed to load product"})}}),e.modalCloseBtn.addEventListener("click",()=>{e.modalEl.classList.remove("modal--is-open"),e.modalListEl.innerHTML=""}),e.modalEl.addEventListener("click",t=>{t.target===e.modalEl&&(e.modalEl.classList.remove("modal--is-open"),e.modalListEl.innerHTML="")})},tt=()=>{e.ulCategorEl.addEventListener("click",async t=>{if(t.target.nodeName!=="BUTTON"||C)return;n=t.target.textContent,localStorage.removeItem(r.USER_VALUE),L(r.SELECTED_CATEGORY,n),e.ulProductEl.innerHTML="",e.notFoundEl.classList.remove("not-found--visible"),e.loadMoreBtn.classList.add("is-hidden"),e.loaderEl.classList.add("is-visible"),e.clearBtnForm.classList.remove("search-form__btn-clear--visible"),g="",e.searchFormEl.reset(),T(),t.target.classList.add("categories__btn--active"),l=1;let s;C=!0;try{n==="All"?(p=u.COMMON,s=await y(l)):(p=u.PRODUCTS_BY_CATEGORY,s=await A(n,l)),v(s.products),h=Math.ceil(s.total/s.limit),l<h?e.loadMoreBtn.classList.remove("is-hidden"):e.loadMoreBtn.classList.add("is-hidden"),s.products.length||e.notFoundEl.classList.add("not-found--visible")}catch(o){i.error({message:o.message||"Failed to load category products"})}finally{C=!1,e.loaderEl.classList.remove("is-visible")}})},M=()=>E(r.THEME)||"light",I=t=>{document.documentElement.setAttribute("data-theme",t)},V=()=>{const s=M()==="light"?"dark":"light";L(r.THEME,s),I(s)},et=()=>{I(M());const t=document.querySelector(".theme-toggle-btn");t&&t.addEventListener("click",V)};async function st(){const t=E(r.SELECTED_CATEGORY);if(!t)return;n=t,p=t==="All"?u.COMMON:u.PRODUCTS_BY_CATEGORY,e.searchFormEl.searchValue.value="",e.clearBtnForm.classList.remove("search-form__btn-clear--visible"),e.notFoundEl.classList.remove("not-found--visible"),e.ulProductEl.innerHTML="",e.loaderEl.classList.add("is-visible"),e.ulCategorEl.querySelectorAll(".categories__btn").forEach(d=>{d.classList.remove("categories__btn--active"),d.textContent===t&&d.classList.add("categories__btn--active")});let o;t==="All"?o=await y(1):o=await A(t,1),v(o.products),e.loaderEl.classList.remove("is-visible")}const ot=()=>{e.buyProductsBtn.addEventListener("click",()=>{E(r.CART)?.length&&i.success({message:"Thank you for your purchase!",position:"topCenter"})})},rt=()=>{e.wishlistBtnEl.addEventListener("click",()=>{const t=E(r.WISHLIST)||[],s=window.location.pathname.includes(P.WISHLIST);t.includes(m)?(R(r.WISHLIST,m),e.wishlistBtnEl.textContent="Add to Wishlist",e.wishlistCountEl.textContent=Math.max(0,t.length-1),s&&(document.querySelector(`.products__item[data-id="${m}"]`)?.remove(),e.ulProductEl.children.length===0&&e.notFoundEl.classList.add("not-found--visible"),e.modalEl.classList.remove("modal--is-open"))):(L(r.WISHLIST,[...t,m]),e.wishlistBtnEl.textContent="Remove from Wishlist",e.wishlistCountEl.textContent=t.length+1)}),e.cartBtnEl.addEventListener("click",()=>{const t=E(r.CART)||[],s=window.location.pathname.includes(P.CART);t.includes(m)?(R(r.CART,m),e.cartBtnEl.textContent="Add to Cart",e.cartCountEl.textContent=Math.max(0,t.length-1),s&&(document.querySelector(`.products__item[data-id="${m}"]`)?.remove(),e.ulProductEl.children.length===0&&e.notFoundEl.classList.add("not-found--visible"),e.modalEl.classList.remove("modal--is-open"))):(L(r.CART,[...t,m]),e.cartBtnEl.textContent="Remove from Cart",e.cartCountEl.textContent=t.length+1)})};export{r as S,rt as a,v as b,K as c,st as d,G as e,k as f,E as g,X as h,et as i,j,tt as k,Q as l,z as m,ot as n,Z as p,e as r,J as s};
//# sourceMappingURL=handlers-B09Vk5j6.js.map
